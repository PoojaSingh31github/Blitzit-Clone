<template>
  <div class="h-screen flex flex-col bg-[#E8E8E8] max-w-[1550px] mx-auto">
    <!-- Top Navbar -->
    <header class="flex justify-between items-center p-4 bg-[#E8E8E8]">
      <div class="flex items-center space-x-4">
        <button class="flex items-center gap-2 text-sm font-bold text-gray-600">
          <svg
            width="12"
            height="12"
            viewBox="0 0 12 12"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M5.64318 6.3537C5.59633 6.30724 5.55915 6.25196 5.53378 6.19106C5.50841 6.13016 5.49534 6.06483 5.49534 5.99886C5.49534 5.93288 5.50841 5.86755 5.53378 5.80665C5.55915 5.74575 5.59633 5.69047 5.64318 5.64401L7.93717 3.35502C7.98401 3.30856 8.02119 3.25328 8.04656 3.19238C8.07194 3.13148 8.085 3.06615 8.085 3.00018C8.085 2.9342 8.07194 2.86887 8.04656 2.80797C8.02119 2.74707 7.98401 2.69179 7.93717 2.64533C7.84353 2.55225 7.71686 2.5 7.58482 2.5C7.45279 2.5 7.32612 2.55225 7.23248 2.64533L4.93849 4.93932C4.65771 5.22045 4.5 5.60153 4.5 5.99886C4.5 6.39618 4.65771 6.77726 4.93849 7.05839L7.23248 9.35238C7.32557 9.44471 7.45121 9.49676 7.58232 9.49731C7.6481 9.49769 7.7133 9.48509 7.77419 9.46022C7.83508 9.43535 7.89047 9.3987 7.93717 9.35238C7.98401 9.30592 8.02119 9.25064 8.04656 9.18974C8.07194 9.12884 8.085 9.06351 8.085 8.99753C8.085 8.93156 8.07194 8.86623 8.04656 8.80533C8.02119 8.74443 7.98401 8.68915 7.93717 8.64269L5.64318 6.3537Z"
              fill="#5A5A5A"
            />
          </svg>
          <span> BACK</span>
        </button>
        <div
          class="bg-[#F5F4F4] w-[200px] py-2 px-3 flex justify-around items-center gap-2 rounded-lg"
        >
          <div
            class="flex items-center gap-2 bg-yellow-200 px-2 py-1 rounded text-xs font-bold"
          >
            T E
          </div>
          <h1 class="font-bold">All Lists</h1>
        </div>
        <p class="text-gray-500 text-sm">
          This list has 15 pending tasks, Est: 30min
        </p>
      </div>
      <div class="flex items-center gap-3 bg-[#F5F4F4] py-2 px-3 rounded-lg">
        <button class="upgrade-button">
          <span class="text">Upgrade Now</span>
        </button>
        <button>
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_4325_98133)">
              <path
                d="M15.8026 14.8619L11.8232 10.8825C12.9077 9.55625 13.4408 7.86392 13.3125 6.15556C13.1841 4.44721 12.404 2.85354 11.1336 1.7042C9.86321 0.554862 8.19963 -0.0622172 6.487 -0.019396C4.77436 0.0234252 3.1437 0.72287 1.93231 1.93426C0.720917 3.14566 0.0214721 4.77632 -0.0213491 6.48895C-0.0641703 8.20158 0.552909 9.86516 1.70225 11.1356C2.85159 12.406 4.44526 13.1861 6.15361 13.3144C7.86196 13.4428 9.5543 12.9096 10.8806 11.8252L14.8599 15.8045C14.9856 15.926 15.154 15.9932 15.3288 15.9916C15.5036 15.9901 15.6708 15.92 15.7944 15.7964C15.9181 15.6728 15.9882 15.5056 15.9897 15.3308C15.9912 15.156 15.924 14.9876 15.8026 14.8619ZM6.66457 11.9999C5.60973 11.9999 4.57859 11.6871 3.70153 11.101C2.82446 10.515 2.14088 9.68204 1.73721 8.7075C1.33354 7.73296 1.22793 6.6606 1.43371 5.62604C1.6395 4.59147 2.14745 3.64117 2.89333 2.89529C3.63921 2.14941 4.58952 1.64145 5.62409 1.43567C6.65865 1.22988 7.73101 1.3355 8.70555 1.73916C9.68009 2.14283 10.513 2.82642 11.0991 3.70348C11.6851 4.58054 11.9979 5.61169 11.9979 6.66652C11.9963 8.08052 11.4339 9.43615 10.4341 10.436C9.4342 11.4359 8.07857 11.9983 6.66457 11.9999Z"
                fill="#B2B2B2"
              />
            </g>
            <defs>
              <clipPath id="clip0_4325_98133">
                <rect width="16" height="16" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </button>
        <button>
          <svg
            width="18"
            height="18"
            viewBox="0 0 18 18"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_12660_61435)">
              <path
                d="M9 6C8.40666 6 7.82664 6.17595 7.33329 6.50559C6.83994 6.83524 6.45543 7.30377 6.22836 7.85195C6.0013 8.40013 5.94189 9.00333 6.05765 9.58527C6.1734 10.1672 6.45912 10.7018 6.87868 11.1213C7.29824 11.5409 7.83279 11.8266 8.41473 11.9424C8.99667 12.0581 9.59987 11.9987 10.1481 11.7716C10.6962 11.5446 11.1648 11.1601 11.4944 10.6667C11.8241 10.1734 12 9.59334 12 9C12 8.20435 11.6839 7.44129 11.1213 6.87868C10.5587 6.31607 9.79565 6 9 6ZM9 10.5C8.70333 10.5 8.41332 10.412 8.16665 10.2472C7.91997 10.0824 7.72771 9.84811 7.61418 9.57402C7.50065 9.29994 7.47095 8.99834 7.52882 8.70736C7.5867 8.41639 7.72956 8.14912 7.93934 7.93934C8.14912 7.72956 8.41639 7.5867 8.70737 7.52882C8.99834 7.47094 9.29994 7.50065 9.57403 7.61418C9.84812 7.72771 10.0824 7.91997 10.2472 8.16664C10.412 8.41332 10.5 8.70333 10.5 9C10.5 9.39782 10.342 9.77936 10.0607 10.0607C9.77936 10.342 9.39783 10.5 9 10.5Z"
                fill="#6C6C6C"
              />
              <path
                d="M15.9704 10.425L15.6374 10.233C15.7873 9.41733 15.7873 8.58117 15.6374 7.7655L15.9704 7.5735C16.2264 7.42576 16.4509 7.22903 16.6309 6.99455C16.811 6.76006 16.9431 6.4924 17.0197 6.20686C17.0963 5.92132 17.1159 5.62349 17.0774 5.33037C17.0389 5.03725 16.9431 4.75458 16.7954 4.4985C16.6476 4.24242 16.4509 4.01795 16.2164 3.8379C15.9819 3.65785 15.7143 3.52575 15.4287 3.44915C15.1432 3.37254 14.8453 3.35292 14.5522 3.39142C14.2591 3.42991 13.9764 3.52576 13.7204 3.6735L13.3866 3.86625C12.7563 3.32769 12.0318 2.91019 11.2498 2.63475V2.25C11.2498 1.65326 11.0128 1.08097 10.5908 0.65901C10.1689 0.237053 9.59659 0 8.99985 0C8.40311 0 7.83082 0.237053 7.40886 0.65901C6.9869 1.08097 6.74985 1.65326 6.74985 2.25V2.63475C5.96789 2.91118 5.24374 3.3297 4.61385 3.86925L4.2786 3.675C3.76143 3.37663 3.14691 3.29593 2.57024 3.45065C1.99356 3.60536 1.50197 3.98283 1.2036 4.5C0.905231 5.01717 0.824528 5.63169 0.979246 6.20836C1.13396 6.78504 1.51143 7.27663 2.0286 7.575L2.3616 7.767C2.21168 8.58267 2.21168 9.41883 2.3616 10.2345L2.0286 10.4265C1.51143 10.7249 1.13396 11.2165 0.979246 11.7931C0.824528 12.3698 0.905231 12.9843 1.2036 13.5015C1.50197 14.0187 1.99356 14.3961 2.57024 14.5509C3.14691 14.7056 3.76143 14.6249 4.2786 14.3265L4.61235 14.1337C5.24292 14.6724 5.96758 15.0899 6.74985 15.3652V15.75C6.74985 16.3467 6.9869 16.919 7.40886 17.341C7.83082 17.7629 8.40311 18 8.99985 18C9.59659 18 10.1689 17.7629 10.5908 17.341C11.0128 16.919 11.2498 16.3467 11.2498 15.75V15.3652C12.0318 15.0888 12.756 14.6703 13.3858 14.1307L13.7211 14.3243C14.2383 14.6226 14.8528 14.7033 15.4295 14.5486C16.0061 14.3939 16.4977 14.0164 16.7961 13.4993C17.0945 12.9821 17.1752 12.3676 17.0205 11.7909C16.8657 11.2142 16.4883 10.7226 15.9711 10.4242L15.9704 10.425ZM14.0594 7.593C14.3133 8.5133 14.3133 9.4852 14.0594 10.4055C14.015 10.5657 14.0251 10.7361 14.0881 10.8899C14.1511 11.0437 14.2634 11.1722 14.4073 11.2552L15.2204 11.7248C15.3927 11.8242 15.5185 11.9881 15.57 12.1803C15.6216 12.3725 15.5947 12.5773 15.4952 12.7496C15.3958 12.922 15.2319 13.0478 15.0397 13.0993C14.8475 13.1509 14.6427 13.124 14.4704 13.0245L13.6558 12.5535C13.5118 12.4701 13.344 12.4369 13.179 12.4593C13.014 12.4817 12.8612 12.5584 12.7446 12.6772C12.077 13.3587 11.236 13.845 10.3123 14.0835C10.1511 14.125 10.0083 14.2189 9.90629 14.3504C9.80432 14.482 9.74902 14.6438 9.7491 14.8102V15.75C9.7491 15.9489 9.67008 16.1397 9.52943 16.2803C9.38878 16.421 9.19801 16.5 8.9991 16.5C8.80019 16.5 8.60942 16.421 8.46877 16.2803C8.32812 16.1397 8.2491 15.9489 8.2491 15.75V14.811C8.24918 14.6445 8.19388 14.4828 8.0919 14.3512C7.98993 14.2196 7.84707 14.1257 7.68585 14.0842C6.76211 13.8448 5.92135 13.3575 5.25435 12.675C5.13774 12.5561 4.9849 12.4795 4.81992 12.4571C4.65493 12.4347 4.48718 12.4678 4.3431 12.5513L3.5301 13.0215C3.44477 13.0715 3.35039 13.1042 3.25239 13.1176C3.15439 13.131 3.05471 13.1249 2.95909 13.0996C2.86346 13.0743 2.77379 13.0303 2.69521 12.9703C2.61664 12.9102 2.55073 12.8352 2.50128 12.7495C2.45182 12.6638 2.4198 12.5692 2.40705 12.4712C2.3943 12.3731 2.40108 12.2734 2.42699 12.178C2.45291 12.0825 2.49745 11.9931 2.55805 11.915C2.61865 11.8368 2.69411 11.7714 2.7801 11.7225L3.5931 11.253C3.73706 11.1699 3.84936 11.0414 3.91234 10.8876C3.97533 10.7338 3.98545 10.5634 3.9411 10.4032C3.68712 9.48295 3.68712 8.51105 3.9411 7.59075C3.98465 7.43091 3.97405 7.26115 3.91096 7.10797C3.84787 6.95479 3.73584 6.8268 3.59235 6.744L2.77935 6.2745C2.60699 6.17504 2.4812 6.01119 2.42965 5.81899C2.3781 5.62679 2.40502 5.42198 2.50447 5.24962C2.60393 5.07727 2.76778 4.95148 2.95998 4.89993C3.15218 4.84838 3.35699 4.87529 3.52935 4.97475L4.34385 5.44575C4.48753 5.52939 4.65493 5.56291 4.81974 5.54105C4.98455 5.51919 5.13743 5.4432 5.25435 5.325C5.92191 4.64351 6.76292 4.15727 7.6866 3.91875C7.84832 3.87717 7.99155 3.78281 8.09358 3.65063C8.1956 3.51844 8.2506 3.35598 8.24985 3.189V2.25C8.24985 2.05109 8.32887 1.86032 8.46952 1.71967C8.61017 1.57902 8.80094 1.5 8.99985 1.5C9.19876 1.5 9.38953 1.57902 9.53018 1.71967C9.67083 1.86032 9.74985 2.05109 9.74985 2.25V3.189C9.74977 3.35547 9.80507 3.51723 9.90705 3.64881C10.009 3.78039 10.1519 3.8743 10.3131 3.91575C11.2371 4.15511 12.0781 4.64241 12.7453 5.325C12.862 5.44385 13.0148 5.52052 13.1798 5.54292C13.3448 5.56533 13.5125 5.5322 13.6566 5.44875L14.4696 4.9785C14.5549 4.92848 14.6493 4.89583 14.7473 4.88243C14.8453 4.86903 14.945 4.87514 15.0406 4.90043C15.1362 4.92571 15.2259 4.96965 15.3045 5.02974C15.3831 5.08982 15.449 5.16485 15.4984 5.2505C15.5479 5.33616 15.5799 5.43076 15.5927 5.52884C15.6054 5.62693 15.5986 5.72656 15.5727 5.82202C15.5468 5.91747 15.5023 6.00686 15.4417 6.08503C15.381 6.1632 15.3056 6.22861 15.2196 6.2775L14.4066 6.747C14.2634 6.83003 14.1517 6.95811 14.0889 7.11127C14.026 7.26443 14.0157 7.43407 14.0594 7.59375V7.593Z"
                fill="#6C6C6C"
              />
            </g>
            <defs>
              <clipPath id="clip0_12660_61435">
                <rect width="18" height="18" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </button>
        <button>p</button>
      </div>
    </header>
    <main class="h-[83%]">
      <router-view />
    </main>
    <footer class="flex justify-between items-center p-4 bg-gray-100 border-t">
      <div class="flex gap-6">
        <button class="flex flex-col items-center text-sm">🏠 Home</button>
        <button class="flex flex-col items-center text-sm">📊 Reports</button>
      </div>
      <div class="flex gap-3">
        <button
          @click="openModal = true"
          className="flex items-center justify-center gap-2 px-6 py-2.5 bg-gradient-to-r from-[#4ac7c0] to-[#8cd96d] text-black font-semibold rounded-full shadow-md hover:opacity-90 transition"
        >
          Add new task
        </button>
        <button class="flex items-center gap-1 text-sm">Help center</button>
      </div>
    </footer>
    <div
      v-if="openModal"
      class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50"
    >
      <div
        class="bg-white p-12 rounded-xl w-[35%] font-sans relative shadow-xl"
      >
        <!-- Close Button -->
        <button
          @click="closeModal"
          class="absolute top-4 right-4 text-2xl text-gray-400 hover:text-gray-700"
        >
          ×
        </button>
        <form @submit.prevent="saveTask">
          <!-- Modal Title -->
          <h2 class="text-center text-xl font-medium mb-10 text-gray-600">
            Add task to list
          </h2>

          <!-- Text Input -->
          <label for="taskTitle" class="block font-normal mb-1 text-gray-500/90"
            >Title</label
          >
          <input
            id="taskTitle"
            type="text"
            v-model="formData.title"
            placeholder="Enter task title"
            class="w-full border border-gray-300 rounded-lg px-4 py-2 mb-8 focus:outline-none focus:ring-1 focus:ring-green-400 transition"
          />

          <!-- Dropdown -->
          <label
            for="taskList"
            class="block text-gray-700 text-center w-full text-gray-500/90 font-normal mb-2"
            >Select a list to add your task</label
          >
          <select
            id="taskList"
            v-model="formData.boardID"
            class="w-full border border-gray-300 rounded-lg px-4 py-2 mb-16 focus:outline-none focus:ring-1 focus:ring-green-400 transition"
          >
            <option value="today">Today</option>
            <option value="this-week">This Week</option>
            <option value="backlog">Backlog</option>
          </select>

          <!-- Action Buttons -->
          <div class="flex justify-center gap-4 w-full">
            <button
              type="button"
              @click="closeModal"
              class="px-6 py-2 text-gray-700 rounded-full border border-black w-1/2"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="px-6 py-2 bg-gradient-to-r from-[#4ac7c0] to-[#8cd96d] hover:opacity-90 rounded-full w-1/2"
            >
              Save
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</template>

<script setup>
import { reactive, ref } from "vue";
import { useTasks } from "@/store/tasksStore";

const { addTask } = useTasks();

const openModal = ref(false);
const newTask = ref("");
const formData = reactive({
  title: "",
  boardID: "today",
});

function closeModal() {
  openModal.value = false;
  formData.title = "";
  formData.boardID = "today";
}

function saveTask() {
  if (!formData.title.trim()) return;
  addTask(formData.boardID, formData.title.trim());
  closeModal();
}
</script>
